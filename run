#!/bin/bash

help(){
	echo "Usage:"
	printf "\t a, app\t\t: Lanuch Lumen app.\n"
	printf "\t e, app\t\t: Enter Lumen container.\n"
	printf "\t t, tests\t: Run tests.\n"
	printf "\t h, help\t: Show this help.\n"
	exit 0
}

if [[ -z $1 ]];then
	help
	exit 0
fi

case $1 in
	a | app)
		docker rm -f php-lumen > /dev/null 2>&1
		docker run -d -p 8000:80 -v /workspace/php-lumen/app:/var/www/html --name php-lumen yamaszone/php7-lumen:latest
		;;
	e | enter)
		docker exec -it php-lumen /bin/bash -c "cd /var/www/html && /bin/bash"
		;;
	t | tests)
		vendor/bats/bin/bats tests/bats/
		;;
	* | h | help)
		help
		;;
esac
